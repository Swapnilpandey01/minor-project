{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\swapn\\\\Desktop\\\\minor project\\\\mern-chat\\\\client\\\\src\\\\components\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API = process.env.REACT_APP_API_URL || 'http://localhost:5000';\nexport default function Chat({\n  user,\n  onLogout\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [text, setText] = useState('');\n  const socketRef = useRef(null);\n  const bottomRef = useRef();\n  useEffect(() => {\n    fetch(`${API}/api/messages`).then(r => r.json()).then(data => setMessages(data)).catch(err => console.error(err));\n    socketRef.current = io(API);\n    socketRef.current.on('connect', () => {\n      socketRef.current.emit('join', user.username);\n    });\n    socketRef.current.on('message', m => {\n      setMessages(prev => [...prev, m]);\n    });\n    socketRef.current.on('user-joined', ({\n      username\n    }) => {\n      setMessages(prev => [...prev, {\n        _id: `sys-${Date.now()}`,\n        sender: 'System',\n        content: `${username} joined`\n      }]);\n    });\n    socketRef.current.on('user-left', ({\n      username\n    }) => {\n      setMessages(prev => [...prev, {\n        _id: `sys-${Date.now()}`,\n        sender: 'System',\n        content: `${username} left`\n      }]);\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [user.username]);\n  useEffect(() => {\n    var _bottomRef$current;\n    (_bottomRef$current = bottomRef.current) === null || _bottomRef$current === void 0 ? void 0 : _bottomRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const send = e => {\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    if (!text.trim()) return;\n    const payload = {\n      username: user.username,\n      content: text.trim()\n    };\n    socketRef.current.emit('message', payload);\n    setText('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 12,\n        borderBottom: '1px solid #eee',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Chat Room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12,\n            color: '#666'\n          },\n          children: [\"Logged in as: \", user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            onLogout();\n          },\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        overflowY: 'auto',\n        padding: 12,\n        background: '#fafafa'\n      },\n      children: [messages.map(m => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12,\n            color: '#888'\n          },\n          children: [m.sender, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: 11,\n              color: '#aaa'\n            },\n            children: m.createdAt ? new Date(m.createdAt).toLocaleTimeString() : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 69\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: 8,\n            background: '#fff',\n            borderRadius: 6\n          },\n          children: m.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)]\n      }, m._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: bottomRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: send,\n      style: {\n        display: 'flex',\n        padding: 12,\n        borderTop: '1px solid #eee'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: text,\n        onChange: e => setText(e.target.value),\n        placeholder: \"Type a message...\",\n        style: {\n          flex: 1,\n          marginRight: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"YTQt+MN5UtjXFTHSwr6ROHnQcZE=\");\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useEffect","useState","useRef","io","jsxDEV","_jsxDEV","API","process","env","REACT_APP_API_URL","Chat","user","onLogout","_s","messages","setMessages","text","setText","socketRef","bottomRef","fetch","then","r","json","data","catch","err","console","error","current","on","emit","username","m","prev","_id","Date","now","sender","content","disconnect","_bottomRef$current","scrollIntoView","behavior","send","e","preventDefault","trim","payload","style","display","flexDirection","height","children","padding","borderBottom","justifyContent","alignItems","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","color","onClick","flex","overflowY","background","map","marginBottom","createdAt","toLocaleTimeString","borderRadius","ref","onSubmit","borderTop","value","onChange","target","placeholder","marginRight","type","_c","$RefreshReg$"],"sources":["C:/Users/swapn/Desktop/minor project/mern-chat/client/src/components/Chat.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { io } from 'socket.io-client';\n\nconst API = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\nexport default function Chat({ user, onLogout }) {\n  const [messages, setMessages] = useState([]);\n  const [text, setText] = useState('');\n  const socketRef = useRef(null);\n  const bottomRef = useRef();\n\n  useEffect(() => {\n    fetch(`${API}/api/messages`)\n      .then(r => r.json())\n      .then(data => setMessages(data))\n      .catch(err => console.error(err));\n\n    socketRef.current = io(API);\n    socketRef.current.on('connect', () => {\n      socketRef.current.emit('join', user.username);\n    });\n\n    socketRef.current.on('message', (m) => {\n      setMessages(prev => [...prev, m]);\n    });\n\n    socketRef.current.on('user-joined', ({ username }) => {\n      setMessages(prev => [...prev, { _id: `sys-${Date.now()}`, sender: 'System', content: `${username} joined` }]);\n    });\n\n    socketRef.current.on('user-left', ({ username }) => {\n      setMessages(prev => [...prev, { _id: `sys-${Date.now()}`, sender: 'System', content: `${username} left` }]);\n    });\n\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [user.username]);\n\n  useEffect(() => {\n    bottomRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const send = (e) => {\n    e?.preventDefault();\n    if (!text.trim()) return;\n    const payload = { username: user.username, content: text.trim() };\n    socketRef.current.emit('message', payload);\n    setText('');\n  };\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\n      <div style={{ padding: 12, borderBottom: '1px solid #eee', display:'flex', justifyContent:'space-between', alignItems:'center' }}>\n        <div>\n          <strong>Chat Room</strong>\n          <div style={{ fontSize: 12, color: '#666' }}>Logged in as: {user.username}</div>\n        </div>\n        <div>\n          <button onClick={() => { onLogout(); }}>Logout</button>\n        </div>\n      </div>\n\n      <div style={{ flex: 1, overflowY: 'auto', padding: 12, background: '#fafafa' }}>\n        {messages.map(m => (\n          <div key={m._id} style={{ marginBottom: 8 }}>\n            <div style={{ fontSize: 12, color: '#888' }}>{m.sender} <span style={{ fontSize: 11, color:'#aaa' }}>{m.createdAt ? (new Date(m.createdAt).toLocaleTimeString()) : ''}</span></div>\n            <div style={{ padding: 8, background: '#fff', borderRadius: 6 }}>{m.content}</div>\n          </div>\n        ))}\n        <div ref={bottomRef}></div>\n      </div>\n\n      <form onSubmit={send} style={{ display: 'flex', padding: 12, borderTop: '1px solid #eee' }}>\n        <input value={text} onChange={e => setText(e.target.value)} placeholder=\"Type a message...\" style={{ flex: 1, marginRight: 8 }} />\n        <button type=\"submit\">Send</button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}